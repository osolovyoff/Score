Всем привет, очень интересная задача. Я использовал этот блокнок в качестве записок и пометок

Оно достаточно объёмное. Поэтому есть моменты которыми я принебрег, я хотел бы их перечислить:
1. дополнительные типы - это просто логика, я смогу их добавить
2. глупо было в самом начале создать реальную клетку(много памяти расходуется) хотя логику атаки я бы перепровил у себя
3. вывод, я его просто использовал но вообще конечно нужно было его разместить на уровне карты и дергать через метод(даже сейчас понимаю что это более элегантное решение)
4. команды - я схитрил и врезался туда откуда они парсятся через синглтон, но можно было переписать свободную функцию или добавить еще одну
5. нет выхода из игровой сессии, вообще я планировал возвращать состояния как это обычно делается, но когда боевая логика заканчивается в лог просто ничего не пишется нового - это похоже на остановку
6. возможно где-то проблемы с аннотацией
7. вообще интересная задача, мне очень понравился Визитор как сделан, никогда не видел чтобы его так использовали в две стороны, это круче чем то что я видел обычно